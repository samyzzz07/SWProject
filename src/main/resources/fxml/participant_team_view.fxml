<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.example.tournament.ui.ParticipantTeamController">
    
    <!-- Top Section: Title -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #2196F3; -fx-padding: 20;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Tournament Management System" textFill="white">
                        <font>
                            <Font name="System Bold" size="24.0"/>
                        </font>
                    </Label>
                    <Label fx:id="welcomeLabel" text="Team Registration and Time Slot Management" textFill="white">
                        <font>
                            <Font size="14.0"/>
                        </font>
                    </Label>
                </VBox>
                <Button text="Logout" onAction="#handleLogout" 
                        style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-weight: bold;"
                        prefWidth="100" prefHeight="35"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- Center Section: Main Content -->
    <center>
        <TabPane BorderPane.alignment="CENTER" tabClosingPolicy="UNAVAILABLE">
            
            <!-- Tab 1: Team Management -->
            <Tab text="Team Management">
                <SplitPane dividerPositions="0.5">
                    <!-- Left Panel: Team Registration -->
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <Label text="Register New Team" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        
                        <VBox spacing="8">
                            <Label text="Team Name:"/>
                            <TextField fx:id="teamNameField" promptText="Enter team name"/>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="Contact Information:"/>
                            <TextField fx:id="contactInfoField" promptText="Enter contact email or phone"/>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="Sport:"/>
                            <ComboBox fx:id="sportComboBox" promptText="Select sport" prefWidth="200.0"/>
                        </VBox>
                        
                        <Button fx:id="registerTeamButton" text="Register Team" 
                                onAction="#handleRegisterTeamButton"
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"
                                prefWidth="150"/>
                        
                        <Separator/>
                        
                        <Label text="Registered Teams" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <ListView fx:id="teamListView" prefHeight="200.0"/>
                        
                        <Separator/>
                        
                        <Label text="Team Actions" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <Label text="Select a team above to perform actions" 
                               style="-fx-font-style: italic; -fx-text-fill: #666; -fx-font-size: 12px;"/>
                        
                        <HBox spacing="10">
                            <Button fx:id="updateTeamButton" text="Update Team" 
                                    onAction="#handleUpdateTeam"
                                    style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-weight: bold;"
                                    prefWidth="130"/>
                            <Button fx:id="saveTeamButton" text="Save Team" 
                                    onAction="#handleSaveTeam"
                                    style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"
                                    prefWidth="130"/>
                        </HBox>
                        
                        <HBox spacing="10">
                            <Button fx:id="requestApprovalButton" text="Request Approval" 
                                    onAction="#handleRequestApproval"
                                    style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-font-weight: bold;"
                                    prefWidth="130"/>
                            <Button fx:id="viewStatsButton" text="View Stats" 
                                    onAction="#handleViewStats"
                                    style="-fx-background-color: #00BCD4; -fx-text-fill: white; -fx-font-weight: bold;"
                                    prefWidth="130"/>
                        </HBox>
                    </VBox>
                    
                    <!-- Right Panel: Time Slot Management -->
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <Label text="Manage Time Slots" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        <Label text="Select a team from the left to add preferred time slots" 
                               style="-fx-font-style: italic; -fx-text-fill: #666;"/>
                        
                        <VBox spacing="8">
                            <Label text="Date:"/>
                            <DatePicker fx:id="timeSlotDatePicker" promptText="Select date"/>
                        </VBox>
                        
                        <HBox spacing="10">
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="Start Time:"/>
                                <TextField fx:id="startTimeField" promptText="HH:MM"/>
                            </VBox>
                            <VBox spacing="8" HBox.hgrow="ALWAYS">
                                <Label text="End Time:"/>
                                <TextField fx:id="endTimeField" promptText="HH:MM"/>
                            </VBox>
                        </HBox>
                        
                        <Button fx:id="addTimeSlotButton" text="Add Time Slot" 
                                onAction="#handleAddTimeSlotButton"
                                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"
                                prefWidth="150"/>
                        
                        <Separator/>
                        
                        <Label text="Preferred Time Slots" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        <ListView fx:id="timeSlotListView" prefHeight="200.0"/>
                    </VBox>
                </SplitPane>
            </Tab>
            
            <!-- Tab 2: Player Management -->
            <Tab text="Player Management">
                <SplitPane dividerPositions="0.5">
                    <!-- Left Panel: Add Player -->
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <Label text="Add New Player" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        <Label text="Select a team from Team Management tab first" 
                               style="-fx-font-style: italic; -fx-text-fill: #666; -fx-font-size: 12px;"/>
                        
                        <VBox spacing="8">
                            <Label text="Selected Team:"/>
                            <Label fx:id="selectedTeamLabel" text="No team selected" 
                                   style="-fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
                        </VBox>
                        
                        <Separator/>
                        
                        <VBox spacing="8">
                            <Label text="Player Name:"/>
                            <TextField fx:id="playerNameField" promptText="Enter player name"/>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="Jersey Number:"/>
                            <TextField fx:id="jerseyNumberField" promptText="Enter jersey number"/>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="Position:"/>
                            <TextField fx:id="positionField" promptText="Enter position (e.g., Forward, Defender)"/>
                        </VBox>
                        
                        <Button fx:id="addPlayerButton" text="Add Player" 
                                onAction="#handleAddPlayer"
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;"
                                prefWidth="150"/>
                        
                        <Separator/>
                        
                        <Label text="Remove Player" style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                        
                        <VBox spacing="8">
                            <Label text="Player ID:"/>
                            <TextField fx:id="removePlayerIdField" promptText="Enter player ID to remove"/>
                        </VBox>
                        
                        <Button fx:id="removePlayerButton" text="Remove Player" 
                                onAction="#handleRemovePlayer"
                                style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-weight: bold;"
                                prefWidth="150"/>
                    </VBox>
                    
                    <!-- Right Panel: Player List -->
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <Label text="Team Players" style="-fx-font-weight: bold; -fx-font-size: 16px;"/>
                        
                        <Button fx:id="refreshPlayersButton" text="Refresh Player List" 
                                onAction="#handleRefreshPlayers"
                                style="-fx-background-color: #607D8B; -fx-text-fill: white; -fx-font-weight: bold;"
                                prefWidth="150"/>
                        
                        <ListView fx:id="playerListView" prefHeight="400.0"/>
                        
                        <Label fx:id="playerCountLabel" text="Total Players: 0" 
                               style="-fx-font-weight: bold; -fx-font-size: 14px;"/>
                    </VBox>
                </SplitPane>
            </Tab>
            
        </TabPane>
    </center>
    
    <!-- Bottom Section: Status Bar -->
    <bottom>
        <HBox style="-fx-background-color: #f0f0f0; -fx-padding: 10;">
            <Label text="Status: " style="-fx-font-weight: bold;"/>
            <Label fx:id="statusLabel" text="Ready"/>
        </HBox>
    </bottom>
    
</BorderPane>
